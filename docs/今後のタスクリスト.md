# 今後の開発タスクリスト

このドキュメントは、要件定義書に基づき、プロトタイプ開発後に残っている未実装の事項をタスクとしてリスト化したものです。

## 1. ユーザー認証機能 (FR-AUTH)

-   [ ] **FR-AUTH-001:** Google Sign-Inの実際のログイン処理を実装する。
-   [ ] **FR-AUTH-002:** Gmail APIへのアクセスに必要な権限の同意をユーザーに求める処理を実装する。
-   [ ] **FR-AUTH-003:** AWS Cognitoを利用したユーザー認証情報の管理機能を実装する（バックエンド）。
-   [ ] **FR-AUTH-004:** 設定画面を作成し、サインアウト機能を実装する。サインアウト確認ダイアログも実装する。
-   [ ] **FR-AUTH-005:** サインアウト時にローカルのセッション情報や一時データをクリアする処理を実装する。

## 2. Gmail連携機能 (FR-GMAIL)

-   [ ] **FR-GMAIL-001:** Gmail APIを介して受信トレイのメールを取得する機能を実装する（バックエンド）。
-   [ ] **FR-GMAIL-002:** AWS EventBridgeを利用し、定期的に新規メールを取得する処理を実装する（バックエンド）。
-   [ ] **FR-GMAIL-003:** 取得するメール情報の詳細（差出人、日時、件名、本文プレビュー、本文、ID）を定義し、処理する機能を実装する（バックエンド）。
-   [ ] **FR-GMAIL-004:** Gmail APIキーおよびGemini APIキーをAWS Secrets Managerで安全に管理する仕組みを構築する（バックエンド）。

## 3. メール表示機能 (FR-DISP)

-   [ ] **FR-DISP-001:** メール一覧画面にソート機能（新着順以外も考慮する場合）を実装する。
-   [ ] **FR-DISP-002:** メール一覧の受信日時を相対表示（例：「5分前」「昨日」など）に実装する。
-   [ ] **FR-DISP-002:** 重要度インジケータを、Gemini APIの判定結果に基づいて色分け表示するように実装する。
-   [ ] **FR-DISP-003:** メール詳細画面で、受信者情報（To, Cc）、詳細な日時形式を表示するように実装する。
-   [ ] **FR-DISP-003:** メール詳細画面で、HTMLメールの簡易レンダリングまたはテキスト抽出を強化する。
-   [ ] **FR-DISP-004:** メール一覧で未読メールを視覚的に区別して表示する機能を実装する（例：太字、背景色変更）。
-   [ ] **FR-DISP-005:** メール一覧画面に無限スクロール機能を実装する。
-   [ ] **FR-DISP-006:** メール一覧読み込み中やメール詳細表示時にローディングインジケータを表示する。
-   [ ] **FR-DISP-007:** メール一覧が空の場合に「表示するメールがありません」などのメッセージを表示する。

## 4. 重要度判定機能 (FR-IMPORT)

-   [ ] **FR-IMPORT-001:** Gemini APIと連携し、メールの重要度を判定する機能を実装する（バックエンド）。
-   [ ] **FR-IMPORT-001:** 効果的な重要度判定のためのプロンプトエンジニアリングを行う。
-   [ ] **FR-IMPORT-001:** Gemini APIのモデル（例：Gemini 1.5 Flash, Gemini 1.5 Pro）を選定する。
-   [ ] **FR-IMPORT-002:** Gemini APIの判定結果（重要度カテゴリ、判定理由の要約など）をDynamoDBに保存する機能を実装する（バックエンド）。
-   [ ] **FR-IMPORT-004:** フロントエンドで、バックエンドから取得した重要度判定結果に基づいてインジケータを表示する（FR-DISP-002と連携）。

## 5. メールフィルタリング・ソート機能 (FR-FILTER)

-   [ ] **FR-FILTER-001:** 重要と判定されたメールのみをフィルタリングして表示する機能を実装する。UI（トグルボタン、ドロップダウン等）も作成する。
-   [ ] **FR-FILTER-001:** フィルタリング状態の永続化を検討・実装する。
-   [ ] **FR-FILTER-002:** 未読メールのみをフィルタリングして表示する機能を実装する（オプション）。

## 6. 設定機能 (FR-SET)

-   [ ] **FR-SET-001:** アプリのバージョン情報を表示する画面を作成する。
-   [ ] **FR-SET-003:** プライバシーポリシーや利用規約へのリンクを表示する画面または項目を作成する（オプション）。

## 7. 非機能要件関連タスク

### 7.1. パフォーマンス (NFR-PERF)
-   [ ] アプリケーション起動時間の計測と改善（目標：コールド5秒以内、ウォーム2秒以内）。
-   [ ] メール一覧初期表示速度の計測と改善（目標：3秒以内）。
-   [ ] メール詳細画面表示速度の計測と改善（目標：2秒以内）。
-   [ ] UI操作の応答性改善（目標：0.1秒以内、カクつき排除）。

### 7.2. セキュリティ (NFR-SEC)
-   [ ] **NFR-SEC-001:** Android標準のセキュリティ機構を利用した認証情報管理の実装。
-   [ ] **NFR-SEC-002:** フロントエンド・バックエンド間通信のHTTPS化確認。
-   [ ] **NFR-SEC-003 & NFR-SEC-004:** AWS側のセキュリティ設定（最小権限、Secrets Manager利用など）の確認と徹底（バックエンド）。
-   [ ] **NFR-SEC-005:** 依存ライブラリの脆弱性スキャンと対応プロセスの確立。
-   [ ] **NFR-SEC-006:** API入力値バリデーションの実装（バックエンド）。

### 7.3. ユーザビリティ (NFR-USAB)
-   [ ] **NFR-USAB-003:** エラーメッセージの標準化と改善。
-   [ ] **NFR-USAB-005:** 基本的なアクセシビリティ対応（TalkBackなど）。

### 7.4. 信頼性 (NFR-REL)
-   [ ] **NFR-REL-001:** Firebase Crashlytics等の導入とクラッシュ率のモニタリング。
-   [ ] **NFR-REL-002:** APIエラー時のリトライ処理実装（バックエンド）。
-   [ ] **NFR-REL-003:** バックエンド定期処理の監視とアラート設定（バックエンド）。
-   [ ] **NFR-REL-004:** データ整合性の担保策検討と実装。

### 7.5. 保守性 (NFR-MAIN)
-   [ ] **NFR-MAIN-001:** コーディング規約の整備と適用、KDocコメントの充実。
-   [ ] **NFR-MAIN-003:** 主要ビジネスロジックのユニットテスト作成（カバレッジ目標60%以上）。
-   [ ] **NFR-MAIN-004:** CI/CDパイプラインの改善・拡充（静的解析、テスト自動化など）。

## 8. その他

-   [ ] READMEドキュメントの充実（アーキテクチャ図、セットアップ方法、API仕様概要など）。
-   [ ] （可能であれば）IaCによるインフラ構成コードの作成（バックエンド）。
-   [ ] （可能であれば）主要APIエンドポイントのPostmanコレクションまたはOpenAPI仕様書の作成。